(()=>{"use strict";var e={n:s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return e.d(t,{a:t}),t},d:(s,t)=>{for(var i in t)e.o(t,i)&&!e.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:t[i]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=Phaser;var t=e.n(s);class i extends t().Scene{constructor(){super("HistoriaScene")}preload(){this.load.image("fondo_hist","/assets/images/hist.jpeg"),this.load.image("boton","/assets/images/boton.png")}create(){this.createBackground(),this.add.rectangle(650,1075,1e3,600,"#000000").setOrigin(.5),this.add.text(650,800,"El famoso piloto Leonardo Sonso se encuentra cerca de su 33Âº copa",{fontSize:"bold 25px",color:"#00FFFF"}).setOrigin(.5),this.add.text(650,830,"Tras cambiar a una nueva carrocerÃ­a, el triunfo parece inevitable",{fontSize:"bold 25px",color:"#00FFFF"}).setOrigin(.5),this.add.text(650,900,"Pulsa para continuar",{fontSize:"bold 75px",color:"#00FF00"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{this.scene.start("HistoriaScene2")})}createBackground(){this.background=this.add.image(640,480,"fondo_hist"),this.background.setDisplaySize(1280,960)}}class o extends t().Scene{constructor(){super("MenuScene")}preload(){this.load.image("fondo","/assets/images/Menu.png"),this.load.image("logo","/assets/images/logo.png"),this.load.image("boton","/assets/images/boton.png")}create(){this.createBackground(),this.createBoton(),this.add.text(350,60,"J1: WASD   J2: Flechas   ESC: Pausa",{fontSize:"30px",color:"#ffffff"}).setOrigin(.5)}createBackground(){this.background=this.add.image(640,480,"fondo"),this.background.setDisplaySize(1280,960),this.logo=this.add.image(1050,750,"logo"),this.logo.setDisplaySize(.4*this.logo.width,.4*this.logo.height)}createBoton(){this.botones=[];const e=["Jugar Local","Jugar Online","Creditos","ConfiguraciÃ³n"],s=["GameScene","GameSceneOnline","CreditosScene","ConfiguracionScene"];[200,300,400,500].forEach((t,i)=>{const o=this.add.image(1100,t,"boton").setInteractive({useHandCursor:!0}),a=this.add.text(1100,t,e[i],{fontSize:"30px",color:"#ffffff"}).setOrigin(.5);this.botones.push({btnImg:o,btnText:a}),o.on("pointerdown",()=>{this.scene.start(s[i])}),o.on("pointerover",()=>a.setColor("#00ff88")),o.on("pointerout",()=>a.setColor("#ffffff"))})}}class a extends t().Physics.Arcade.Sprite{constructor(e,s,t,i,o){super(e,t,i,o),this.laps=0,this.passedCheckpoint=!1,this.justCrossedFinish=!1,this.id=s,this.scene=e,e.add.existing(this),e.physics.add.existing(this),this.baseSpeed=300,this.offRoadSpeed=120,this.currentSpeed=this.baseSpeed,this.isOffRoad=!1,this.setCollideWorldBounds(!0),this.body.allowGravity=!1,this.setOrigin(.5),this.setDrag(400,400),this.setScale(.4),this.body.setSize(.6*this.width,.8*this.height),this.body.setOffset(.2*this.width,.1*this.height)}setOffRoad(e){this.isOffRoad!==e&&(this.isOffRoad=e,this.currentSpeed=e?this.currentSpeed-=230:this.currentSpeed+=230,this.setTint(e?11184810:16777215))}}class n{constructor(){this.players=new Map,this.gameScene=null}setPlayers(e){this.players=e}setGameScene(e){this.gameScene=e}process(e){e.execute()}}class r{execute(){}serialize(){}getPlayer(){}}class h extends r{constructor(e,s,t,i){super(),this.scene=e,this.car=s,this.dirX=t,this.dirY=i}execute(){if(!this.car||!this.car.body)return;const e=this.car.currentSpeed;0!==this.dirX&&(this.car.angle+=1.5*this.dirX),0!==this.dirY&&this.scene.physics.velocityFromRotation(Phaser.Math.DegToRad(this.car.angle),e*this.dirY,this.car.body.velocity)}}class d extends r{constructor(e,s){super(),this.gameScene=e,this.isPaused=s}execute(){this.gameScene.setPauseState(this.isPaused)}}class c extends t().Scene{constructor(e="GameScene"){super(e)}preload(){console.log("ðŸ”„ Cargando recursos..."),this.load.image("game_background","/assets/images/fondo.png"),this.load.image("mapaColision","/assets/images/fondo_colisiones.jpeg"),this.load.image("coche","/assets/images/Coche1.png"),this.load.image("car_red","/assets/images/Coche2.png"),this.load.image("power_ice","/assets/images/slow_enemigo.png"),this.load.image("power_speed","/assets/images/turbo.png"),this.load.image("power_slow","/assets/images/slow.png"),this.load.audio("bgm","assets/music/Waluigi Pinball 8-BIT - Mario Kart DS (Smash Bros. Version).mp3"),this.load.on("loaderror",e=>{console.warn(`âš ï¸ No se pudo cargar: ${e.key} (${e.src})`)})}init(){this.players=new Map,this.inputMappings=[],this.isPaused=!1,this.escWasDown=!1,this.processor=new n,this.MAX_LAPS=2}create(){this.sound.stopAll(),this.music=this.sound.add("bgm",{loop:!0}),this.music.play(),this.isPaused=!1,this.escWasDown=!1,this.physics.world.resume(),this.powerUps=this.physics.add.group(),this.createBackground(),this.createCheckPoint(),this.createFinishLine(),this.createCollisionMap(),this.setUpPlayers(),this.setupCollisions(),this.createPowerUp(400,350,"speed"),this.createPowerUp(1050,150,"slow"),this.createPowerUp(250,75,"ice"),this.add.text(640,15,"Â¡El primero en dar 3 vueltas gana!",{fontSize:"bold 24px",color:"#ffffff"}).setOrigin(.5),this.escKey=this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes.ESC),this.lapText=this.add.text(16,40,"",{fontSize:"18px",color:"#ffffff",backgroundColor:"#000000"}).setDepth(1e3)}createPowerUp(e,s,t){const i=this.powerUps.create(e,s,`power_${t}`);i.type=t,i.setScale(.5),i.body.allowGravity=!1}createCollisionMap(){this.collisionMap=this.add.image(0,0,"mapaColision"),this.collisionMap.setOrigin(0,0),this.collisionMap.setVisible(!1)}createBackground(){this.background=this.add.image(640,480,"game_background"),this.background.setDisplaySize(1280,960)}createFinishLine(){const e=this.add.graphics();e.fillStyle(16711680,.4),e.fillRect(800,680,10,120),this.finishLine=this.physics.add.staticImage(805,740,null).setDisplaySize(10,120).setVisible(!1),this.finishLine.body.setSize(10,120),this.finishLine.body.updateFromGameObject()}createCheckPoint(){const e=this.add.graphics();e.fillStyle(65280,.4),e.fillRect(700,30,10,120),this.CheckPointLine=this.physics.add.staticImage(705,90,null).setDisplaySize(10,120).setVisible(!1),this.CheckPointLine.body.setSize(10,120),this.CheckPointLine.body.updateFromGameObject()}setUpPlayers(){const e=new a(this,"player1",740,715,"coche"),s=new a(this,"player2",750,745,"car_red");this.players.set("player1",e),this.players.set("player2",s),this.inputMappings=[{playerId:"player1",upKey:"W",downKey:"S",leftKey:"A",rightKey:"D"},{playerId:"player2",upKey:"UP",downKey:"DOWN",leftKey:"LEFT",rightKey:"RIGHT"}].map(e=>({playerId:e.playerId,upKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.upKey]),downKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.downKey]),leftKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.leftKey]),rightKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.rightKey])}))}setPauseState(e){this.isPaused=e,e?(this.scene.launch("PauseScene",{originalScene:"GameScene"}),this.scene.pause()):(this.isPaused=!1,this.physics.resume())}resume(){this.isPaused=!1,this.physics.resume()}togglePause(){const e=!this.isPaused;this.processor.process(new d(this,e))}update(){this.escKey.isDown&&!this.escWasDown&&this.togglePause(),this.players.forEach(e=>{console.log(`Jugador: ${e.id} | Vueltas: ${e.laps}/${this.MAX_LAPS}  Paso meta: ${e.passedCheckpoint}`);const s=Math.floor(e.x),t=Math.floor(e.y),i=this.textures.getPixel(s,t,"mapaColision");i&&(247===i.r&&247===i.g&&247===i.b?e.setOffRoad(!0):e.setOffRoad(!1))}),this.inputMappings.forEach(e=>{const s=this.players.get(e.playerId);if(!s)return;let t=0,i=0;e.upKeyObj.isDown?i=1:e.downKeyObj.isDown&&(i=-1),e.leftKeyObj.isDown?t=-1:e.rightKeyObj.isDown&&(t=1),this.processor.process(new h(this,s,t,i))})}applyPowerUp(e,s){switch(s.type){case"speed":e.currentSpeed+=80,this.time.delayedCall(3e3,()=>{e.currentSpeed=e.isOffRoad?e.offRoadSpeed:e.baseSpeed});break;case"slow":e.currentSpeed-=80,this.time.delayedCall(2e3,()=>{e.currentSpeed=e.isOffRoad?e.offRoadSpeed:e.baseSpeed});break;case"ice":const s=this.getOtherCar(e);if(!s)return;const t=s.currentSpeed;s.currentSpeed-=.4*t,this.time.delayedCall(3e3,()=>{s.currentSpeed=s.isOffRoad?s.offRoadSpeed:s.baseSpeed})}}setupCollisions(){const e=this.players.get("player1"),s=this.players.get("player2");this.physics.add.collider(e,s),this.players.forEach(e=>{this.physics.add.overlap(e,this.powerUps,(e,s)=>{this.applyPowerUp(e,s),s.destroy()})}),this.players.forEach(e=>{this.physics.add.overlap(e,this.CheckPointLine,()=>{e.passedCheckpoint||(e.passedCheckpoint=!0)})}),this.players.forEach(e=>{this.physics.add.overlap(e,this.finishLine,()=>{e.passedCheckpoint&&e.laps<this.MAX_LAPS&&(e.passedCheckpoint=!1,e.laps++),e.passedCheckpoint&&e.laps===this.MAX_LAPS&&(this.physics.pause(),e.setTint(65280),this.scene.start("WinningScene",{winner:e}))})})}getOtherCar(e){for(const s of this.players.values())if(s!==e)return s;return null}}class l extends t().Scene{constructor(){super("PauseScene")}create(e){this.add.rectangle(640,480,1280,960,0,.7),this.add.text(640,320,"Juego en pausa",{fontSize:"48px",color:"#ffffff"}).setOrigin(.5);const s=this.add.text(640,512,"Reanudar",{fontSize:"32px",color:"#00ff00"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setColor("#00ff88")).on("pointerout",()=>s.setColor("#00ff00")).on("pointerdown",()=>{this.scene.stop(),this.scene.resume(e.originalScene),this.scene.get(e.originalScene).resume()}),t=this.add.text(640,640,"Volver al menÃº principal",{fontSize:"32px",color:"#ffffff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>t.setColor("#ff8888")).on("pointerout",()=>t.setColor("#ffffff")).on("pointerdown",()=>{this.sound.stopAll(),this.scene.stop(e.originalScene),this.scene.start("MenuScene")})}}class p extends t().Scene{constructor(){super("WinningScene")}init(e){this.winner=e.winner}create(){this.add.rectangle(640,480,1280,960,0,.7),this.add.text(640,400,`${this.winner.id} gana la carrera!`,{fontSize:"40px",color:"#00ff00"}).setOrigin(.5);const e=this.add.text(640,640,"Volver al menÃº principal",{fontSize:"32px",color:"#ffffff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>e.setColor("#ff8888")).on("pointerout",()=>e.setColor("#ffffff")).on("pointerdown",()=>{this.scene.start("MenuScene")})}}class f extends t().Scene{constructor(){super("CreditosScene")}create(){this.add.rectangle(640,480,1280,960,0,.7),this.add.text(640,320,"Juego hecho por",{fontSize:"48px",color:"#ffffff"}).setOrigin(.5),this.add.text(650,400,"David Santos, Jorge Sanchez, ",{fontSize:"48px",color:"#ffffff"}).setOrigin(.5),this.add.text(640,450,"Mario Rodrigo, Jiajie Liu. ",{fontSize:"48px",color:"#ffffff"}).setOrigin(.5),this.add.text(640,555,"Musica cortesÃ­a de: ",{fontSize:"48px",color:"#ffffff"}).setOrigin(.5),this.add.text(640,630,"F1 theme 8-bit version, de Victoresto 99 en YouTube",{fontSize:"40px",color:"#ffffff"}).setOrigin(.5),this.add.text(640,680,"Waluigi Pinball 8-BIT - Mario Kart DS",{fontSize:"40px",color:"#ffffff"}).setOrigin(.5),this.add.text(640,710,"(Smash Bros. Version) de Loeder en Youtube",{fontSize:"40px",color:"#ffffff"}).setOrigin(.5);const e=this.add.text(640,900,"Volver al menÃº principal",{fontSize:"32px",color:"#00ff00"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>e.setColor("#ff8888")).on("pointerout",()=>e.setColor("#ffffff")).on("pointerdown",()=>{this.scene.start("MenuScene")})}}class u extends t().Scene{preload(){this.load.image("boton","/assets/images/boton.png"),this.load.audio("theme","/assets/music/F1.mp3")}create(){this.music=this.sound.add("theme",{loop:!0}),this.music.play(),this.add.text(650,400,"Â¿Quieres omitir la historia?",{fontSize:"45px",color:"#ffffff"}).setOrigin(.5),this.add.image(650,500,"boton").setInteractive({useHandCursor:!0}).on("pointerdown",()=>{this.scene.start("HistoriaScene")}),this.add.text(650,500,"Ver historia",{fontSize:"30px",color:"#ffffff"}).setOrigin(.5),this.add.image(650,600,"boton").setInteractive({useHandCursor:!0}).on("pointerdown",()=>{this.scene.start("MenuScene")}),this.add.text(650,600,"Saltar historia",{fontSize:"30px",color:"#ffffff"}).setOrigin(.5)}}class g extends t().Scene{constructor(){super("HistoriaScene2")}preload(){this.load.image("fondo_hist2","/assets/images/hist2.jpeg"),this.load.image("boton","/assets/images/boton.png")}create(){this.createBackground(),this.add.rectangle(650,1075,1e3,600,"#000000").setOrigin(.5),this.add.text(650,800,"Pero su mayor rival, Carlos Santos, le pisa los talones",{fontSize:"bold 25px",color:"#00FFFF"}).setOrigin(.5),this.add.text(650,830,"Â¿QuÃ© piloto se lazarÃ¡ con la victoria de la final?",{fontSize:"bold 25px",color:"#00FFFF"}).setOrigin(.5),this.add.text(650,900,"Pulsa para continuar",{fontSize:"bold 75px",color:"#00FF00"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{this.scene.start("MenuScene")})}createBackground(){this.background=this.add.image(640,480,"fondo_hist2"),this.background.setDisplaySize(1280,960)}}const y={type:t().AUTO,width:1280,height:960,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[u,o,i,c,l,p,class extends c{constructor(){super("GameSceneOnline")}init(){super.init(),this.myRole=null,this.opponentRole=null,this.waitingText=null,this.gameStarted=!1}create(){this.createBackground(),this.createCollisionMap(),this.createCheckPoint(),this.createFinishLine(),this.powerUps=this.physics.add.group(),this.escKey=this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes.ESC),this.sound.stopAll(),this.music=this.sound.add("bgm",{loop:!0}),this.music.play(),this.waitingText=this.add.text(640,480,"Conectando al servidor...",{fontSize:"40px",color:"#ffffff",backgroundColor:"#000000"}).setOrigin(.5).setDepth(2e3),this.setupSocket()}setupSocket(){this.socket=new WebSocket("ws://localhost:3000"),this.socket.onopen=()=>{this.waitingText.setText("Buscando oponente..."),this.socket.send(JSON.stringify({type:"joinQueue"}))},this.socket.onmessage=e=>{const s=JSON.parse(e.data);this.handleServerMessage(s)},this.socket.onclose=()=>{this.waitingText.setText("Desconectado del servidor").setVisible(!0)}}handleServerMessage(e){switch(e.type){case"gameStart":this.myRole=e.role,this.opponentRole="player1"===this.myRole?"player2":"player1",this.startGame();break;case"playerUpdate":this.gameStarted&&this.updateOpponent(e);break;case"gameOver":const s=e.winner===this.myRole?this.players.get(this.myRole):this.players.get(this.opponentRole);this.scene.start("WinningScene",{winner:s}),this.socket.close();break;case"opponentDisconnected":this.waitingText.setText("Oponente desconectado").setVisible(!0),this.physics.pause()}}startGame(){this.waitingText.setVisible(!1),this.gameStarted=!0;const e=new a(this,"player1",740,715,"coche"),s=new a(this,"player2",750,745,"car_red");this.players.set("player1",e),this.players.set("player2",s),this.setupCollisions(),this.setupMyInput()}setupMyInput(){this.cursors=this.input.keyboard.createCursorKeys(),this.keys=this.input.keyboard.addKeys({w:t().Input.Keyboard.KeyCodes.W,a:t().Input.Keyboard.KeyCodes.A,s:t().Input.Keyboard.KeyCodes.S,d:t().Input.Keyboard.KeyCodes.D})}update(){if(!this.gameStarted)return;const e=this.players.get(this.myRole);e&&(this.handleLocalMovement(e),this.socket.send(JSON.stringify({type:"playerMove",x:e.x,y:e.y,angle:e.angle,speed:e.currentSpeed})),e.laps>=this.MAX_LAPS&&this.socket.send(JSON.stringify({type:"raceFinish"})),super.update())}handleLocalMovement(e){const s=e.currentSpeed;let i=0,o=0;this.cursors.up.isDown||this.keys.w.isDown?i=1:(this.cursors.down.isDown||this.keys.s.isDown)&&(i=-1),this.cursors.left.isDown||this.keys.a.isDown?o=-1:(this.cursors.right.isDown||this.keys.d.isDown)&&(o=1),0!==o&&(e.angle+=1.5*o),0!==i&&this.physics.velocityFromRotation(t().Math.DegToRad(e.angle),s*i,e.body.velocity)}updateOpponent(e){const s=this.players.get(this.opponentRole);s&&(s.x=e.x,s.y=e.y,s.setRotation(t().Math.DegToRad(e.angle)))}},f,g],backgroundColor:"#1a1a2e"};new(t().Game)(y)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VTFKLEtBQUtzTixLQUFLRSxFQUFFOUQsT0FBUWpGLEVBQU8sR0FDaER6RSxLQUFLb04sUUFBUWEsS0FBS3ZFLFFBQVUxSixLQUFLc04sS0FBS0ssRUFBRWpFLFVBQVFqRixHQUFRLEdBRTdEekUsS0FBS29OLFFBQVFjLEtBQUt4RSxRQUFVMUosS0FBS3NOLEtBQUt6TyxFQUFFNkssT0FBUWxGLEdBQVEsR0FDbkR4RSxLQUFLb04sUUFBUWUsTUFBTXpFLFFBQVUxSixLQUFLc04sS0FBSzFPLEVBQUU4SyxVQUFRbEYsRUFBTyxHQUdwRCxJQUFUQSxJQUFZRCxFQUFJSSxPQUFnQixJQUFQSCxHQUVoQixJQUFUQyxHQUNGekUsS0FBSzJDLFFBQVFpQyxxQkFDWCxTQUFZRSxTQUFTUCxFQUFJSSxPQUN6QkQsRUFBUUQsRUFDUkYsRUFBSXRCLEtBQUs4QixTQUdmLENBRUEsY0FBQWlJLENBQWVoQyxHQUNiLE1BQU1vRCxFQUFXcE8sS0FBSzJELFFBQVF0RSxJQUFJVyxLQUFLOEwsY0FDbkNzQyxJQUVGQSxFQUFTL0wsRUFBSTJJLEVBQUszSSxFQUNsQitMLEVBQVN6TSxFQUFJcUosRUFBS3JKLEVBQ2xCeU0sRUFBU0MsWUFBWSxTQUFZdkosU0FBU2tHLEVBQUtyRyxRQUVuRCxHRDlKeUcwRyxFQUFlRSxHQUN4SGpFLGdCQUFpQixXQUdOLElBQUksVUFBWXlCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcmFjaW5nLWdhbWUtcHJhY3RpY2Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS9leHRlcm5hbCB2YXIgXCJQaGFzZXJcIiIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS8uL3NyYy9jbGllbnQvc2NlbmVzL0hpc3RvcmlhU2NlbmUuanMiLCJ3ZWJwYWNrOi8vcmFjaW5nLWdhbWUtcHJhY3RpY2UvLi9zcmMvY2xpZW50L3NjZW5lcy9NZW51U2NlbmUuanMiLCJ3ZWJwYWNrOi8vcmFjaW5nLWdhbWUtcHJhY3RpY2UvLi9zcmMvY2xpZW50L2VudGl0aWVzL0Nhci5qcyIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS8uL3NyYy9jbGllbnQvY29tbWFuZHMvQ29tbWFuZFByb2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS8uL3NyYy9jbGllbnQvY29tbWFuZHMvQ29tbWFuZC5qcyIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS8uL3NyYy9jbGllbnQvY29tbWFuZHMvTW92ZUNhckNvbW1hbmQuanMiLCJ3ZWJwYWNrOi8vcmFjaW5nLWdhbWUtcHJhY3RpY2UvLi9zcmMvY2xpZW50L2NvbW1hbmRzL1BhdXNlR2FtZUNvbW1hbmQuanMiLCJ3ZWJwYWNrOi8vcmFjaW5nLWdhbWUtcHJhY3RpY2UvLi9zcmMvY2xpZW50L3NjZW5lcy9HYW1lU2NlbmUuanMiLCJ3ZWJwYWNrOi8vcmFjaW5nLWdhbWUtcHJhY3RpY2UvLi9zcmMvY2xpZW50L3NjZW5lcy9QYXVzZVNjZW5lLmpzIiwid2VicGFjazovL3JhY2luZy1nYW1lLXByYWN0aWNlLy4vc3JjL2NsaWVudC9zY2VuZXMvV2lubmluZ1NjZW5lLmpzIiwid2VicGFjazovL3JhY2luZy1nYW1lLXByYWN0aWNlLy4vc3JjL2NsaWVudC9zY2VuZXMvQ3JlZGl0b3NTY2VuZS5qcyIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS8uL3NyYy9jbGllbnQvc2NlbmVzL1ByZUhpc3RvcmlhU2NlbmUuanMiLCJ3ZWJwYWNrOi8vcmFjaW5nLWdhbWUtcHJhY3RpY2UvLi9zcmMvY2xpZW50L3NjZW5lcy9IaXN0b3JpYVNjZW5lMi5qcyIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS8uL3NyYy9jbGllbnQvbWFpbi5qcyIsIndlYnBhY2s6Ly9yYWNpbmctZ2FtZS1wcmFjdGljZS8uL3NyYy9jbGllbnQvc2NlbmVzL0dhbWVTY2VuZU9ubGluZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IFBoYXNlcjsiLCJpbXBvcnQgUGhhc2VyIGZyb20gXCJwaGFzZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIaXN0b3JpYVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKFwiSGlzdG9yaWFTY2VuZVwiKTtcclxuICB9XHJcbiAgcHJlbG9hZCgpe1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwiZm9uZG9faGlzdFwiLCBcIi9hc3NldHMvaW1hZ2VzL2hpc3QuanBlZ1wiKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZShcImJvdG9uXCIsIFwiL2Fzc2V0cy9pbWFnZXMvYm90b24ucG5nXCIpO1xyXG4gICAgXHJcbiAgfVxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVCYWNrZ3JvdW5kKCk7XHJcbiAgICB0aGlzLmFkZC5yZWN0YW5nbGUoNjUwLCAxMDc1LCAxMDAwLCA2MDAsIFwiIzAwMDAwMFwiKS5zZXRPcmlnaW4oMC41KTtcclxuICAgIHRoaXMuYWRkLnRleHQoNjUwLCA4MDAsIFwiRWwgZmFtb3NvIHBpbG90byBMZW9uYXJkbyBTb25zbyBzZSBlbmN1ZW50cmEgY2VyY2EgZGUgc3UgMzPCuiBjb3BhXCIse1xyXG4gICAgICBmb250U2l6ZTogXCJib2xkIDI1cHhcIixcclxuICAgICAgY29sb3I6IFwiIzAwRkZGRlwiXHJcbiAgICB9KS5zZXRPcmlnaW4oMC41KVxyXG4gICAgdGhpcy5hZGQudGV4dCg2NTAsIDgzMCwgXCJUcmFzIGNhbWJpYXIgYSB1bmEgbnVldmEgY2Fycm9jZXLDrWEsIGVsIHRyaXVuZm8gcGFyZWNlIGluZXZpdGFibGVcIix7XHJcbiAgICAgIGZvbnRTaXplOiBcImJvbGQgMjVweFwiLFxyXG4gICAgICBjb2xvcjogXCIjMDBGRkZGXCJcclxuICAgIH0pLnNldE9yaWdpbigwLjUpXHJcblxyXG4gICAgdGhpcy5hZGQudGV4dCg2NTAsIDkwMCwgXCJQdWxzYSBwYXJhIGNvbnRpbnVhclwiLHtcclxuICAgICAgICAgICAgZm9udFNpemU6IFwiYm9sZCA3NXB4XCIsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcIiMwMEZGMDBcIlxyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpXHJcbiAgICAgICAgLnNldEludGVyYWN0aXZlKHt1c2VIYW5kQ3Vyc29yOiB0cnVlfSkub24oXCJwb2ludGVyZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoXCJIaXN0b3JpYVNjZW5lMlwiKTtcclxuICAgICAgICB9KVxyXG4gIH1cclxuICBjcmVhdGVCYWNrZ3JvdW5kKCkge1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5hZGQuaW1hZ2UoNjQwLCA0ODAsIFwiZm9uZG9faGlzdFwiKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZC5zZXREaXNwbGF5U2l6ZSgxMjgwLCA5NjApO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lbnVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIk1lbnVTY2VuZVwiKTtcclxuICB9XHJcbiAgcHJlbG9hZCgpe1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwiZm9uZG9cIiwgXCIvYXNzZXRzL2ltYWdlcy9NZW51LnBuZ1wiKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZShcImxvZ29cIiwgXCIvYXNzZXRzL2ltYWdlcy9sb2dvLnBuZ1wiKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZShcImJvdG9uXCIsIFwiL2Fzc2V0cy9pbWFnZXMvYm90b24ucG5nXCIpO1xyXG4gIH1cclxuICBjcmVhdGUoKSB7XHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlQmFja2dyb3VuZCgpO1xyXG4gICAgdGhpcy5jcmVhdGVCb3RvbigpO1xyXG5cclxuICAgIHRoaXMuYWRkXHJcbiAgICAgIC50ZXh0KDM1MCwgNjAsIFwiSjE6IFdBU0QgICBKMjogRmxlY2hhcyAgIEVTQzogUGF1c2FcIiwge1xyXG4gICAgICAgIGZvbnRTaXplOiBcIjMwcHhcIixcclxuICAgICAgICBjb2xvcjogXCIjZmZmZmZmXCJcclxuICAgICAgfSlcclxuICAgICAgLnNldE9yaWdpbigwLjUpO1xyXG4gIH1cclxuICBjcmVhdGVCYWNrZ3JvdW5kKCkge1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5hZGQuaW1hZ2UoNjQwLCA0ODAsIFwiZm9uZG9cIik7XHJcbiAgICB0aGlzLmJhY2tncm91bmQuc2V0RGlzcGxheVNpemUoMTI4MCwgOTYwKTtcclxuICAgIHRoaXMubG9nbyA9IHRoaXMuYWRkLmltYWdlKDEwNTAsIDc1MCwgXCJsb2dvXCIpO1xyXG4gICAgdGhpcy5sb2dvLnNldERpc3BsYXlTaXplKHRoaXMubG9nby53aWR0aCAqIDAuNCwgdGhpcy5sb2dvLmhlaWdodCAqIDAuNCk7XHJcbiAgfVxyXG5cclxuIGNyZWF0ZUJvdG9uKCkge1xyXG4gIHRoaXMuYm90b25lcyA9IFtdO1xyXG4gIGNvbnN0IHBvc2ljaW9uZXNZID0gWzIwMCwgMzAwLCA0MDAsIDUwMF07XHJcbiAgY29uc3Qgbm9tYnJlcyA9IFtcIkp1Z2FyIExvY2FsXCIsIFwiSnVnYXIgT25saW5lXCIsIFwiQ3JlZGl0b3NcIiwgXCJDb25maWd1cmFjacOzblwiXTtcclxuICBjb25zdCBlc2NlbmFzID0gW1wiR2FtZVNjZW5lXCIsIFwiR2FtZVNjZW5lT25saW5lXCIsIFwiQ3JlZGl0b3NTY2VuZVwiLCBcIkNvbmZpZ3VyYWNpb25TY2VuZVwiXTtcclxuXHJcbiAgcG9zaWNpb25lc1kuZm9yRWFjaCgoeSwgaSkgPT4ge1xyXG4gICAgY29uc3QgYnRuSW1nID0gdGhpcy5hZGQuaW1hZ2UoMTEwMCwgeSwgXCJib3RvblwiKS5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcbiAgICBjb25zdCBidG5UZXh0ID0gdGhpcy5hZGQudGV4dCgxMTAwLCB5LCBub21icmVzW2ldLCB7XHJcbiAgICAgIGZvbnRTaXplOiBcIjMwcHhcIixcclxuICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICB0aGlzLmJvdG9uZXMucHVzaCh7IGJ0bkltZywgYnRuVGV4dCB9KTtcclxuXHJcbiAgICBidG5JbWcub24oXCJwb2ludGVyZG93blwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2NlbmUuc3RhcnQoZXNjZW5hc1tpXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBidG5JbWcub24oXCJwb2ludGVyb3ZlclwiLCAoKSA9PiBidG5UZXh0LnNldENvbG9yKFwiIzAwZmY4OFwiKSk7XHJcbiAgICBidG5JbWcub24oXCJwb2ludGVyb3V0XCIsICgpID0+IGJ0blRleHQuc2V0Q29sb3IoXCIjZmZmZmZmXCIpKTtcclxuICB9KTtcclxufVxyXG59XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhciBleHRlbmRzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUge1xyXG4gIGNvbnN0cnVjdG9yKHNjZW5lLCBpZCwgeCwgeSwgdGV4dHVyZSkge1xyXG4gICAgc3VwZXIoc2NlbmUsIHgsIHksIHRleHR1cmUpO1xyXG5cclxudGhpcy5sYXBzID0gMDtcclxudGhpcy5wYXNzZWRDaGVja3BvaW50ID0gZmFsc2U7XHJcbnRoaXMuanVzdENyb3NzZWRGaW5pc2ggPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcblxyXG4gICAgc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgc2NlbmUucGh5c2ljcy5hZGQuZXhpc3RpbmcodGhpcyk7XHJcblxyXG4gICAgLy8gVkVMT0NJREFERVNcclxuICAgIHRoaXMuYmFzZVNwZWVkID0gMzAwO1xyXG4gICAgdGhpcy5vZmZSb2FkU3BlZWQgPSAxMjA7XHJcbiAgICB0aGlzLmN1cnJlbnRTcGVlZCA9IHRoaXMuYmFzZVNwZWVkO1xyXG5cclxuICAgIHRoaXMuaXNPZmZSb2FkID0gZmFsc2U7XHJcblxyXG4gICAgLy8gQ09ORklHIEbDjVNJQ0FcclxuICAgIHRoaXMuc2V0Q29sbGlkZVdvcmxkQm91bmRzKHRydWUpO1xyXG4gICAgdGhpcy5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zZXRPcmlnaW4oMC41KTtcclxuICAgIHRoaXMuc2V0RHJhZyg0MDAsIDQwMCk7XHJcblxyXG4gICAgdGhpcy5zZXRTY2FsZSgwLjQpO1xyXG5cclxudGhpcy5ib2R5LnNldFNpemUoXHJcbiAgdGhpcy53aWR0aCAqIDAuNixcclxuICB0aGlzLmhlaWdodCAqIDAuOFxyXG4pO1xyXG5cclxudGhpcy5ib2R5LnNldE9mZnNldChcclxuICB0aGlzLndpZHRoICogMC4yLFxyXG4gIHRoaXMuaGVpZ2h0ICogMC4xXHJcbik7XHJcbiAgICBcclxuICB9XHJcblxyXG4gIHNldE9mZlJvYWQodmFsdWUpIHtcclxuXHJcbiAgICBpZiAodGhpcy5pc09mZlJvYWQgPT09IHZhbHVlKSByZXR1cm47XHJcbiAgICB0aGlzLmlzT2ZmUm9hZCA9IHZhbHVlO1xyXG4gICAgdGhpcy5jdXJyZW50U3BlZWQgPSB2YWx1ZSA/IHRoaXMuY3VycmVudFNwZWVkLT0yMzAgOiB0aGlzLmN1cnJlbnRTcGVlZCs9MjMwO1xyXG5cclxuICAgIC8vIEZlZWRiYWNrIHZpc3VhbCBvcGNpb25hbFxyXG4gICAgdGhpcy5zZXRUaW50KHZhbHVlID8gMHhhYWFhYWEgOiAweGZmZmZmZik7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQ29tbWFuZFByb2Nlc3NvciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnBsYXllcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLmdhbWVTY2VuZSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBzZXRQbGF5ZXJzKHBsYXllcnMpIHtcclxuICAgIHRoaXMucGxheWVycyA9IHBsYXllcnM7XHJcbiAgfVxyXG5cclxuICBzZXRHYW1lU2NlbmUoZ2FtZVNjZW5lKSB7XHJcbiAgICB0aGlzLmdhbWVTY2VuZSA9IGdhbWVTY2VuZTtcclxuICB9XHJcblxyXG4gIHByb2Nlc3MoY29tbWFuZCkge1xyXG4gICAgY29tbWFuZC5leGVjdXRlKCk7XHJcbiAgICAvLyBFbiB1biBmdXR1cm8sIGFxdcOtIHNlIHBvZHLDrWEgZW52aWFyIGVsIGNvbWFuZG8gcG9yIHJlZC5cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENvbW1hbmQge1xyXG4gIGV4ZWN1dGUoKSB7fVxyXG4gIHNlcmlhbGl6ZSgpIHt9XHJcbiAgZ2V0UGxheWVyKCkge31cclxufVxyXG4iLCJpbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4vQ29tbWFuZC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vdmVDYXJDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XHJcbiAgY29uc3RydWN0b3Ioc2NlbmUsIGNhciwgZGlyWCwgZGlyWSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgIHRoaXMuY2FyID0gY2FyO1xyXG4gICAgdGhpcy5kaXJYID0gZGlyWDtcclxuICAgIHRoaXMuZGlyWSA9IGRpclk7XHJcbiAgfVxyXG5cclxuICBleGVjdXRlKCkge1xyXG4gICAgaWYgKCF0aGlzLmNhciB8fCAhdGhpcy5jYXIuYm9keSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHNwZWVkID0gdGhpcy5jYXIuY3VycmVudFNwZWVkO1xyXG5cclxuICAgIC8vIEdJUk9cclxuICAgIGlmICh0aGlzLmRpclggIT09IDApIHtcclxuICAgICAgdGhpcy5jYXIuYW5nbGUgKz0gdGhpcy5kaXJYICogMS41O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFWQU5DRVxyXG4gICAgaWYgKHRoaXMuZGlyWSAhPT0gMCkge1xyXG4gICAgICB0aGlzLnNjZW5lLnBoeXNpY3MudmVsb2NpdHlGcm9tUm90YXRpb24oXHJcbiAgICAgICAgUGhhc2VyLk1hdGguRGVnVG9SYWQodGhpcy5jYXIuYW5nbGUpLFxyXG4gICAgICAgIHNwZWVkICogdGhpcy5kaXJZLFxyXG4gICAgICAgIHRoaXMuY2FyLmJvZHkudmVsb2NpdHlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuL0NvbW1hbmQuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQYXVzZUdhbWVDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XHJcbiAgY29uc3RydWN0b3IoZ2FtZVNjZW5lLCBpc1BhdXNlZCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuZ2FtZVNjZW5lID0gZ2FtZVNjZW5lO1xyXG4gICAgdGhpcy5pc1BhdXNlZCA9IGlzUGF1c2VkO1xyXG4gIH1cclxuXHJcbiAgZXhlY3V0ZSgpIHtcclxuICAgIHRoaXMuZ2FtZVNjZW5lLnNldFBhdXNlU3RhdGUodGhpcy5pc1BhdXNlZCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xyXG5pbXBvcnQgeyBDYXIgfSBmcm9tIFwiLi4vZW50aXRpZXMvQ2FyLmpzXCI7XHJcbmltcG9ydCB7IENvbW1hbmRQcm9jZXNzb3IgfSBmcm9tIFwiLi4vY29tbWFuZHMvQ29tbWFuZFByb2Nlc3Nvci5qc1wiO1xyXG5pbXBvcnQgeyBNb3ZlQ2FyQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kcy9Nb3ZlQ2FyQ29tbWFuZC5qc1wiO1xyXG5pbXBvcnQgeyBQYXVzZUdhbWVDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRzL1BhdXNlR2FtZUNvbW1hbmQuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gIGNvbnN0cnVjdG9yKGtleSA9IFwiR2FtZVNjZW5lXCIpIHtcclxuICAgIHN1cGVyKGtleSk7IFxyXG4gIH1cclxuXHJcbiAgcHJlbG9hZCgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UhCBDYXJnYW5kbyByZWN1cnNvcy4uLlwiKTtcclxuXHJcbiAgICAvLyBGb25kb1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwiZ2FtZV9iYWNrZ3JvdW5kXCIsIFwiL2Fzc2V0cy9pbWFnZXMvZm9uZG8ucG5nXCIpO1xyXG5cclxuICAgIC8vQ29saXNpb25lc1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdtYXBhQ29saXNpb24nLCAnL2Fzc2V0cy9pbWFnZXMvZm9uZG9fY29saXNpb25lcy5qcGVnJyk7XHJcbiAgICBcclxuICAgIC8vIENvY2hlc1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwiY29jaGVcIiwgXCIvYXNzZXRzL2ltYWdlcy9Db2NoZTEucG5nXCIpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwiY2FyX3JlZFwiLCBcIi9hc3NldHMvaW1hZ2VzL0NvY2hlMi5wbmdcIik7XHJcblxyXG4gICAgLy8gUG93ZXIgVXBzXHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoXCJwb3dlcl9pY2VcIiwgXCIvYXNzZXRzL2ltYWdlcy9zbG93X2VuZW1pZ28ucG5nXCIpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwicG93ZXJfc3BlZWRcIiwgXCIvYXNzZXRzL2ltYWdlcy90dXJiby5wbmdcIik7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoXCJwb3dlcl9zbG93XCIsIFwiL2Fzc2V0cy9pbWFnZXMvc2xvdy5wbmdcIik7XHJcblxyXG4gICAgLy9NdXNpY2FcclxuICAgIHRoaXMubG9hZC5hdWRpbyhcImJnbVwiLCBcImFzc2V0cy9tdXNpYy9XYWx1aWdpIFBpbmJhbGwgOC1CSVQgLSBNYXJpbyBLYXJ0IERTIChTbWFzaCBCcm9zLiBWZXJzaW9uKS5tcDNcIilcclxuXHJcbiAgICAvLyBFdmVudG8gZGUgY2FyZ2EgZmFsbGlkYVxyXG4gICAgdGhpcy5sb2FkLm9uKCdsb2FkZXJyb3InLCAoZmlsZSkgPT4ge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBObyBzZSBwdWRvIGNhcmdhcjogJHtmaWxlLmtleX0gKCR7ZmlsZS5zcmN9KWApO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICB9XHJcblxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbGF5ZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgdGhpcy5pbnB1dE1hcHBpbmdzID0gW107XHJcbiAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLmVzY1dhc0Rvd24gPSBmYWxzZTtcclxuICAgIHRoaXMucHJvY2Vzc29yID0gbmV3IENvbW1hbmRQcm9jZXNzb3IoKTtcclxuICAgIHRoaXMuTUFYX0xBUFMgPSAyO1xyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcbiAgY3JlYXRlKCkge1xyXG4gICAgdGhpcy5zb3VuZC5zdG9wQWxsKCk7XHJcbiAgICB0aGlzLm11c2ljID0gdGhpcy5zb3VuZC5hZGQoXCJiZ21cIiwge2xvb3A6IHRydWV9KTtcclxuICAgIHRoaXMubXVzaWMucGxheSgpO1xyXG4gICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5lc2NXYXNEb3duID0gZmFsc2U7XHJcbiAgICB0aGlzLnBoeXNpY3Mud29ybGQucmVzdW1lKCk7XHJcblxyXG4gICAgdGhpcy5wb3dlclVwcyA9IHRoaXMucGh5c2ljcy5hZGQuZ3JvdXAoKTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUJhY2tncm91bmQoKTtcclxuICAgIHRoaXMuY3JlYXRlQ2hlY2tQb2ludCgpO1xyXG4gICAgdGhpcy5jcmVhdGVGaW5pc2hMaW5lKCk7XHJcbiAgICB0aGlzLmNyZWF0ZUNvbGxpc2lvbk1hcCgpO1xyXG4gICAgdGhpcy5zZXRVcFBsYXllcnMoKTtcclxuICAgIHRoaXMuc2V0dXBDb2xsaXNpb25zKCk7XHJcbiAgICBcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVBvd2VyVXAoNDAwLCAzNTAsIFwic3BlZWRcIik7XHJcbiAgICB0aGlzLmNyZWF0ZVBvd2VyVXAoMTA1MCwgMTUwLCBcInNsb3dcIik7XHJcbiAgICB0aGlzLmNyZWF0ZVBvd2VyVXAoMjUwLCA3NSwgXCJpY2VcIik7XHJcblxyXG4gICAgdGhpcy5hZGRcclxuICAgICAgLnRleHQoNjQwLCAxNSwgXCLCoUVsIHByaW1lcm8gZW4gZGFyIDMgdnVlbHRhcyBnYW5hIVwiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiYm9sZCAyNHB4XCIsXHJcbiAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICB0aGlzLmVzY0tleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFxyXG4gICAgICBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRVNDXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMubGFwVGV4dCA9IHRoaXMuYWRkLnRleHQoMTYsIDQwLCBcIlwiLCB7XHJcbiAgZm9udFNpemU6IFwiMThweFwiLFxyXG4gIGNvbG9yOiBcIiNmZmZmZmZcIixcclxuICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzAwMDAwMFwiXHJcbn0pLnNldERlcHRoKDEwMDApO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlUG93ZXJVcCh4LCB5LCB0eXBlKSB7XHJcbiAgY29uc3Qgc3ByaXRlID0gdGhpcy5wb3dlclVwcy5jcmVhdGUoeCwgeSwgYHBvd2VyXyR7dHlwZX1gKTtcclxuICBzcHJpdGUudHlwZSA9IHR5cGU7XHJcblxyXG4gIHNwcml0ZS5zZXRTY2FsZSgwLjUpO1xyXG4gIHNwcml0ZS5ib2R5LmFsbG93R3Jhdml0eSA9IGZhbHNlO1xyXG59XHJcbiAgY3JlYXRlQ29sbGlzaW9uTWFwKCl7XHJcbiAgICB0aGlzLmNvbGxpc2lvbk1hcCA9IHRoaXMuYWRkLmltYWdlKDAsIDAsIFwibWFwYUNvbGlzaW9uXCIpO1xyXG4gICAgdGhpcy5jb2xsaXNpb25NYXAuc2V0T3JpZ2luKDAsIDApO1xyXG4gICAgdGhpcy5jb2xsaXNpb25NYXAuc2V0VmlzaWJsZShmYWxzZSk7XHJcblxyXG4gIH1cclxuICBjcmVhdGVCYWNrZ3JvdW5kKCkge1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5hZGQuaW1hZ2UoNjQwLCA0ODAsIFwiZ2FtZV9iYWNrZ3JvdW5kXCIpO1xyXG4gICAgXHJcbiAgICB0aGlzLmJhY2tncm91bmQuc2V0RGlzcGxheVNpemUoMTI4MCwgOTYwKTtcclxuICB9XHJcblxyXG5jcmVhdGVGaW5pc2hMaW5lKCkge1xyXG4gIGNvbnN0IHggPSA4MDA7XHJcbiAgY29uc3QgeSA9IDY4MDtcclxuICBjb25zdCB3aWR0aCA9IDEwO1xyXG4gIGNvbnN0IGhlaWdodCA9IDEyMDtcclxuXHJcbiAgLy8gREVCVUcgdmlzdWFsXHJcbiAgY29uc3QgZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XHJcbiAgZy5maWxsU3R5bGUoMHhmZjAwMDAsIDAuNCk7XHJcbiAgZy5maWxsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgdGhpcy5maW5pc2hMaW5lID0gdGhpcy5waHlzaWNzLmFkZFxyXG4gICAgLnN0YXRpY0ltYWdlKHggKyB3aWR0aCAvIDIsIHkgKyBoZWlnaHQgLyAyLCBudWxsKVxyXG4gICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpXHJcbiAgICAuc2V0VmlzaWJsZShmYWxzZSk7XHJcblxyXG4gIHRoaXMuZmluaXNoTGluZS5ib2R5LnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcbiAgdGhpcy5maW5pc2hMaW5lLmJvZHkudXBkYXRlRnJvbUdhbWVPYmplY3QoKTtcclxufVxyXG5cclxuICBjcmVhdGVDaGVja1BvaW50KCkge1xyXG4gIGNvbnN0IHN0YXJ0WCA9IDcwMDtcclxuICBjb25zdCBzdGFydFkgPSAzMDtcclxuXHJcbiAgY29uc3Qgd2lkdGggPSAxMDtcclxuICBjb25zdCBoZWlnaHQgPSAxMjA7XHJcblxyXG4gIC8vIERFQlVHIHZpc3VhbFxyXG4gIGNvbnN0IGdyYXBoaWNzID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcclxuICBncmFwaGljcy5maWxsU3R5bGUoMHgwMGZmMDAsIDAuNCk7XHJcbiAgZ3JhcGhpY3MuZmlsbFJlY3Qoc3RhcnRYLCBzdGFydFksIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICB0aGlzLkNoZWNrUG9pbnRMaW5lID0gdGhpcy5waHlzaWNzLmFkZFxyXG4gICAgLnN0YXRpY0ltYWdlKHN0YXJ0WCArIHdpZHRoIC8gMiwgc3RhcnRZICsgaGVpZ2h0IC8gMiwgbnVsbClcclxuICAgIC5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KVxyXG4gICAgLnNldFZpc2libGUoZmFsc2UpO1xyXG5cclxuICB0aGlzLkNoZWNrUG9pbnRMaW5lLmJvZHkuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuICB0aGlzLkNoZWNrUG9pbnRMaW5lLmJvZHkudXBkYXRlRnJvbUdhbWVPYmplY3QoKTtcclxufVxyXG4gIHNldFVwUGxheWVycygpIHtcclxuICAgIGNvbnN0IGNhcjEgPSBuZXcgQ2FyKHRoaXMsIFwicGxheWVyMVwiLCA3NDAsIDcxNSwgXCJjb2NoZVwiKTtcclxuICAgIGNvbnN0IGNhcjIgPSBuZXcgQ2FyKHRoaXMsIFwicGxheWVyMlwiLCA3NTAsIDc0NSwgXCJjYXJfcmVkXCIpO1xyXG5cclxuICAgIHRoaXMucGxheWVycy5zZXQoXCJwbGF5ZXIxXCIsIGNhcjEpO1xyXG4gICAgdGhpcy5wbGF5ZXJzLnNldChcInBsYXllcjJcIiwgY2FyMik7XHJcblxyXG4gICAgY29uc3QgSW5wdXRDb25maWcgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBwbGF5ZXJJZDogXCJwbGF5ZXIxXCIsXHJcbiAgICAgICAgdXBLZXk6IFwiV1wiLFxyXG4gICAgICAgIGRvd25LZXk6IFwiU1wiLFxyXG4gICAgICAgIGxlZnRLZXk6IFwiQVwiLFxyXG4gICAgICAgIHJpZ2h0S2V5OiBcIkRcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgcGxheWVySWQ6IFwicGxheWVyMlwiLFxyXG4gICAgICAgIHVwS2V5OiBcIlVQXCIsXHJcbiAgICAgICAgZG93bktleTogXCJET1dOXCIsXHJcbiAgICAgICAgbGVmdEtleTogXCJMRUZUXCIsXHJcbiAgICAgICAgcmlnaHRLZXk6IFwiUklHSFRcIlxyXG4gICAgICB9XHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuaW5wdXRNYXBwaW5ncyA9IElucHV0Q29uZmlnLm1hcCgoY29uZmlnKSA9PiAoe1xyXG4gICAgICBwbGF5ZXJJZDogY29uZmlnLnBsYXllcklkLFxyXG4gICAgICB1cEtleU9iajogdGhpcy5pbnB1dC5rZXlib2FyZC5hZGRLZXkoXHJcbiAgICAgICAgUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzW2NvbmZpZy51cEtleV1cclxuICAgICAgKSxcclxuICAgICAgZG93bktleU9iajogdGhpcy5pbnB1dC5rZXlib2FyZC5hZGRLZXkoXHJcbiAgICAgICAgUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzW2NvbmZpZy5kb3duS2V5XVxyXG4gICAgICApLFxyXG4gICAgICBsZWZ0S2V5T2JqOiB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShcclxuICAgICAgICBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXNbY29uZmlnLmxlZnRLZXldXHJcbiAgICAgICksXHJcbiAgICAgIHJpZ2h0S2V5T2JqOiB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShcclxuICAgICAgICBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXNbY29uZmlnLnJpZ2h0S2V5XVxyXG4gICAgICApXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0UGF1c2VTdGF0ZShpc1BhdXNlZCkge1xyXG4gICAgdGhpcy5pc1BhdXNlZCA9IGlzUGF1c2VkO1xyXG4gICAgaWYgKGlzUGF1c2VkKSB7XHJcbiAgICAgIHRoaXMuc2NlbmUubGF1bmNoKFwiUGF1c2VTY2VuZVwiLCB7IG9yaWdpbmFsU2NlbmU6IFwiR2FtZVNjZW5lXCIgfSk7XHJcbiAgICAgIHRoaXMuc2NlbmUucGF1c2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5waHlzaWNzLnJlc3VtZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzdW1lKCkge1xyXG4gICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5waHlzaWNzLnJlc3VtZSgpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlUGF1c2UoKSB7XHJcbiAgICBjb25zdCBuZXdQYXVzZVN0YXRlID0gIXRoaXMuaXNQYXVzZWQ7XHJcbiAgICB0aGlzLnByb2Nlc3Nvci5wcm9jZXNzKG5ldyBQYXVzZUdhbWVDb21tYW5kKHRoaXMsIG5ld1BhdXNlU3RhdGUpKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLmVzY0tleS5pc0Rvd24gJiYgIXRoaXMuZXNjV2FzRG93bikge1xyXG4gICAgICB0aGlzLnRvZ2dsZVBhdXNlKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICB0aGlzLnBsYXllcnMuZm9yRWFjaCgoY2FyKSA9PiB7XHJcbiAgICAgY29uc29sZS5sb2coXHJcbiAgYEp1Z2Fkb3I6ICR7Y2FyLmlkfSB8IFZ1ZWx0YXM6ICR7Y2FyLmxhcHN9LyR7dGhpcy5NQVhfTEFQU30gIFBhc28gbWV0YTogJHtjYXIucGFzc2VkQ2hlY2twb2ludH1gXHJcbik7XHJcbiAgICBjb25zdCB4ID0gTWF0aC5mbG9vcihjYXIueCk7XHJcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihjYXIueSk7XHJcblxyXG4gICAgY29uc3QgY29sb3IgPSB0aGlzLnRleHR1cmVzLmdldFBpeGVsKHgsIHksIFwibWFwYUNvbGlzaW9uXCIpO1xyXG4gICAgaWYgKCFjb2xvcikgcmV0dXJuO1xyXG4gICAgLy8gQkxBTkNPID0gZnVlcmEgZGUgcGlzdGFcclxuICAgICBpZiAoY29sb3IuciA9PT0gMjQ3ICYmIGNvbG9yLmcgPT09IDI0NyAmJiBjb2xvci5iID09PSAyNDcpIHtcclxuICAgICAgY2FyLnNldE9mZlJvYWQodHJ1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyBORUdSTyA9IHBpc3RhXHJcbiAgICBlbHNlIHtcclxuICAgICAgY2FyLnNldE9mZlJvYWQoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAvLyBJTlBVVFxyXG4gIHRoaXMuaW5wdXRNYXBwaW5ncy5mb3JFYWNoKChtYXBwaW5nKSA9PiB7XHJcbiAgICBjb25zdCBjYXIgPSB0aGlzLnBsYXllcnMuZ2V0KG1hcHBpbmcucGxheWVySWQpO1xyXG4gICAgaWYgKCFjYXIpIHJldHVybjtcclxuXHJcbiAgICBsZXQgZGlyWCA9IDA7XHJcbiAgICBsZXQgZGlyWSA9IDA7XHJcblxyXG4gICAgaWYgKG1hcHBpbmcudXBLZXlPYmouaXNEb3duKSBkaXJZID0gMTtcclxuICAgIGVsc2UgaWYgKG1hcHBpbmcuZG93bktleU9iai5pc0Rvd24pIGRpclkgPSAtMTtcclxuXHJcbiAgICBpZiAobWFwcGluZy5sZWZ0S2V5T2JqLmlzRG93bikgZGlyWCA9IC0xO1xyXG4gICAgZWxzZSBpZiAobWFwcGluZy5yaWdodEtleU9iai5pc0Rvd24pIGRpclggPSAxO1xyXG5cclxuICAgIHRoaXMucHJvY2Vzc29yLnByb2Nlc3MoXHJcbiAgICAgIG5ldyBNb3ZlQ2FyQ29tbWFuZCh0aGlzLCBjYXIsIGRpclgsIGRpclkpXHJcbiAgICApO1xyXG4gIH0pO1xyXG59XHJcbmFwcGx5UG93ZXJVcChjYXIsIHBvd2VyVXApIHtcclxuICBzd2l0Y2ggKHBvd2VyVXAudHlwZSkge1xyXG5cclxuICAgIGNhc2UgXCJzcGVlZFwiOlxyXG5cclxuICAgICAgY2FyLmN1cnJlbnRTcGVlZCArPSA4MDtcclxuXHJcbiAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgzMDAwLCAoKSA9PiB7XHJcbiAgICAgICAgY2FyLmN1cnJlbnRTcGVlZCA9IGNhci5pc09mZlJvYWRcclxuICAgICAgICAgID8gY2FyLm9mZlJvYWRTcGVlZFxyXG4gICAgICAgICAgOiBjYXIuYmFzZVNwZWVkO1xyXG4gICAgICB9KTtcclxuICAgICAgYnJlYWs7XHJcblxyXG4gICAgY2FzZSBcInNsb3dcIjpcclxuXHJcbiAgICAgIGNhci5jdXJyZW50U3BlZWQgLT0gODA7XHJcblxyXG4gICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMjAwMCwgKCkgPT4ge1xyXG4gICAgICAgIGNhci5jdXJyZW50U3BlZWQgPSBjYXIuaXNPZmZSb2FkXHJcbiAgICAgICAgICA/IGNhci5vZmZSb2FkU3BlZWRcclxuICAgICAgICAgIDogY2FyLmJhc2VTcGVlZDtcclxuICAgICAgfSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiaWNlXCI6XHJcblxyXG4gICAgICBjb25zdCBvdGhlckNhciA9IHRoaXMuZ2V0T3RoZXJDYXIoY2FyKTtcclxuICAgICAgaWYgKCFvdGhlckNhcikgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3Qgb3JpZ2luYWxTcGVlZCA9IG90aGVyQ2FyLmN1cnJlbnRTcGVlZDtcclxuXHJcbiAgICAgIG90aGVyQ2FyLmN1cnJlbnRTcGVlZCAtPSBvcmlnaW5hbFNwZWVkICogMC40O1xyXG5cclxuICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDMwMDAsICgpID0+IHtcclxuICAgICAgICAvLyBSZXN0YXVyYXIgc2Vnw7puIGVzdGFkbyByZWFsXHJcbiAgICAgICAgb3RoZXJDYXIuY3VycmVudFNwZWVkID0gb3RoZXJDYXIuaXNPZmZSb2FkXHJcbiAgICAgICAgICA/IG90aGVyQ2FyLm9mZlJvYWRTcGVlZFxyXG4gICAgICAgICAgOiBvdGhlckNhci5iYXNlU3BlZWQ7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcbiAgc2V0dXBDb2xsaXNpb25zKCkge1xyXG4gICAgY29uc3QgY2FyMSA9IHRoaXMucGxheWVycy5nZXQoXCJwbGF5ZXIxXCIpO1xyXG4gICAgY29uc3QgY2FyMiA9IHRoaXMucGxheWVycy5nZXQoXCJwbGF5ZXIyXCIpO1xyXG4gICAgdGhpcy5waHlzaWNzLmFkZC5jb2xsaWRlcihjYXIxLCBjYXIyKTtcclxuXHJcbiAgICB0aGlzLnBsYXllcnMuZm9yRWFjaCgoY2FyKSA9PiB7XHJcbiAgdGhpcy5waHlzaWNzLmFkZC5vdmVybGFwKFxyXG4gICAgY2FyLFxyXG4gICAgdGhpcy5wb3dlclVwcyxcclxuICAgIChjYXIsIHBvd2VyVXApID0+IHtcclxuICAgICAgdGhpcy5hcHBseVBvd2VyVXAoY2FyLCBwb3dlclVwKTtcclxuICAgICAgcG93ZXJVcC5kZXN0cm95KCk7XHJcbiAgICB9XHJcbiAgKTtcclxufSk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXJzLmZvckVhY2goKHBsYXllcikgPT4ge1xyXG4gIHRoaXMucGh5c2ljcy5hZGQub3ZlcmxhcChwbGF5ZXIsIHRoaXMuQ2hlY2tQb2ludExpbmUsICgpID0+IHtcclxuICAgIGlmICghcGxheWVyLnBhc3NlZENoZWNrcG9pbnQpIHtcclxuICAgICAgcGxheWVyLnBhc3NlZENoZWNrcG9pbnQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbiAgdGhpcy5wbGF5ZXJzLmZvckVhY2goKHBsYXllcikgPT4ge1xyXG4gIHRoaXMucGh5c2ljcy5hZGQub3ZlcmxhcChwbGF5ZXIsIHRoaXMuZmluaXNoTGluZSwgKCkgPT4ge1xyXG4gICAgaWYgKHBsYXllci5wYXNzZWRDaGVja3BvaW50ICYmIHBsYXllci5sYXBzIDwgdGhpcy5NQVhfTEFQUykge1xyXG4gICAgICBwbGF5ZXIucGFzc2VkQ2hlY2twb2ludCA9IGZhbHNlO1xyXG4gICAgICBwbGF5ZXIubGFwcysrO1xyXG4gICAgfVxyXG4gICAgaWYocGxheWVyLnBhc3NlZENoZWNrcG9pbnQgJiYgcGxheWVyLmxhcHMgPT09IHRoaXMuTUFYX0xBUFMpe1xyXG4gICAgICB0aGlzLnBoeXNpY3MucGF1c2UoKTtcclxuICAgICAgcGxheWVyLnNldFRpbnQoMHgwMGZmMDApO1xyXG4gICAgICB0aGlzLnNjZW5lLnN0YXJ0KFwiV2lubmluZ1NjZW5lXCIsIHsgd2lubmVyOiBwbGF5ZXJ9KTtcclxuICAgICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbiAgfTtcclxuZ2V0T3RoZXJDYXIoY3VycmVudENhcikge1xyXG4gIGZvciAoY29uc3QgY2FyIG9mIHRoaXMucGxheWVycy52YWx1ZXMoKSkge1xyXG4gICAgaWYgKGNhciAhPT0gY3VycmVudENhcikgcmV0dXJuIGNhcjtcclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxufTtcclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGF1c2VTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIlBhdXNlU2NlbmVcIik7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoZGF0YSkge1xyXG4gICAgdGhpcy5hZGQucmVjdGFuZ2xlKDY0MCwgNDgwLCAxMjgwLCA5NjAsIDB4MDAwMDAwLCAwLjcpO1xyXG5cclxuICAgIHRoaXMuYWRkXHJcbiAgICAgIC50ZXh0KDY0MCwgMzIwLCBcIkp1ZWdvIGVuIHBhdXNhXCIsIHtcclxuICAgICAgICBmb250U2l6ZTogXCI0OHB4XCIsXHJcbiAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICBjb25zdCByZXN1bWVCdG4gPSB0aGlzLmFkZFxyXG4gICAgICAudGV4dCg2NDAsIDUxMiwgXCJSZWFudWRhclwiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiMzJweFwiLFxyXG4gICAgICAgIGNvbG9yOiBcIiMwMGZmMDBcIlxyXG4gICAgICB9KVxyXG4gICAgICAuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KVxyXG4gICAgICAub24oXCJwb2ludGVyb3ZlclwiLCAoKSA9PiByZXN1bWVCdG4uc2V0Q29sb3IoXCIjMDBmZjg4XCIpKVxyXG4gICAgICAub24oXCJwb2ludGVyb3V0XCIsICgpID0+IHJlc3VtZUJ0bi5zZXRDb2xvcihcIiMwMGZmMDBcIikpXHJcbiAgICAgIC5vbihcInBvaW50ZXJkb3duXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLnNjZW5lLnN0b3AoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlc3VtZShkYXRhLm9yaWdpbmFsU2NlbmUpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuZ2V0KGRhdGEub3JpZ2luYWxTY2VuZSkucmVzdW1lKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG1lbnVCdG4gPSB0aGlzLmFkZFxyXG4gICAgICAudGV4dCg2NDAsIDY0MCwgXCJWb2x2ZXIgYWwgbWVuw7ogcHJpbmNpcGFsXCIsIHtcclxuICAgICAgICBmb250U2l6ZTogXCIzMnB4XCIsXHJcbiAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pXHJcbiAgICAgIC5vbihcInBvaW50ZXJvdmVyXCIsICgpID0+IG1lbnVCdG4uc2V0Q29sb3IoXCIjZmY4ODg4XCIpKVxyXG4gICAgICAub24oXCJwb2ludGVyb3V0XCIsICgpID0+IG1lbnVCdG4uc2V0Q29sb3IoXCIjZmZmZmZmXCIpKVxyXG4gICAgICAub24oXCJwb2ludGVyZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zb3VuZC5zdG9wQWxsKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5zdG9wKGRhdGEub3JpZ2luYWxTY2VuZSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5zdGFydChcIk1lbnVTY2VuZVwiKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdpbm5pbmdTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIldpbm5pbmdTY2VuZVwiKTtcclxuICB9XHJcbiAgaW5pdChkYXRhKSB7XHJcbiAgICAvLyBkYXRhLndpbm5lciBlcyBlbCBqdWdhZG9yIHF1ZSBwYXNhbW9zIGRlc2RlIEdhbWVTY2VuZVxyXG4gICAgdGhpcy53aW5uZXIgPSBkYXRhLndpbm5lcjtcclxuICB9XHJcbiAgY3JlYXRlKCkge1xyXG4gICAgXHJcbiAgICB0aGlzLmFkZC5yZWN0YW5nbGUoNjQwLCA0ODAsIDEyODAsIDk2MCwgMHgwMDAwMDAsIDAuNyk7XHJcbiAgICB0aGlzLmFkZC50ZXh0KDY0MCwgNDAwLCBgJHt0aGlzLndpbm5lci5pZH0gZ2FuYSBsYSBjYXJyZXJhIWAsIHtcclxuICAgICAgICBmb250U2l6ZTogXCI0MHB4XCIsXHJcbiAgICAgICAgY29sb3I6IFwiIzAwZmYwMFwiXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICBjb25zdCBtZW51QnRuID0gdGhpcy5hZGRcclxuICAgICAgLnRleHQoNjQwLCA2NDAsIFwiVm9sdmVyIGFsIG1lbsO6IHByaW5jaXBhbFwiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiMzJweFwiLFxyXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIlxyXG4gICAgICB9KVxyXG4gICAgICAuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KVxyXG4gICAgICAub24oXCJwb2ludGVyb3ZlclwiLCAoKSA9PiBtZW51QnRuLnNldENvbG9yKFwiI2ZmODg4OFwiKSlcclxuICAgICAgLm9uKFwicG9pbnRlcm91dFwiLCAoKSA9PiBtZW51QnRuLnNldENvbG9yKFwiI2ZmZmZmZlwiKSlcclxuICAgICAgLm9uKFwicG9pbnRlcmRvd25cIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoXCJNZW51U2NlbmVcIik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JlZGl0b3NTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIkNyZWRpdG9zU2NlbmVcIik7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoKSB7XHJcbiAgICB0aGlzLmFkZC5yZWN0YW5nbGUoNjQwLCA0ODAsIDEyODAsIDk2MCwgMHgwMDAwMDAsIDAuNyk7XHJcblxyXG4gICAgdGhpcy5hZGRcclxuICAgICAgLnRleHQoNjQwLCAzMjAsIFwiSnVlZ28gaGVjaG8gcG9yXCIsIHtcclxuICAgICAgICBmb250U2l6ZTogXCI0OHB4XCIsXHJcbiAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuICAgIHRoaXMuYWRkXHJcbiAgICAgIC50ZXh0KDY1MCwgNDAwLCBcIkRhdmlkIFNhbnRvcywgSm9yZ2UgU2FuY2hleiwgXCIsIHtcclxuICAgICAgICBmb250U2l6ZTogXCI0OHB4XCIsXHJcbiAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgIHRoaXMuYWRkXHJcbiAgICAgIC50ZXh0KDY0MCwgNDUwLCBcIk1hcmlvIFJvZHJpZ28sIEppYWppZSBMaXUuIFwiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiNDhweFwiLFxyXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIlxyXG4gICAgICB9KVxyXG4gICAgICAuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgIHRoaXMuYWRkXHJcbiAgICAgIC50ZXh0KDY0MCwgNTU1LCBcIk11c2ljYSBjb3J0ZXPDrWEgZGU6IFwiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiNDhweFwiLFxyXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIlxyXG4gICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuICAgICAgdGhpcy5hZGRcclxuICAgICAgLnRleHQoNjQwLCA2MzAsIFwiRjEgdGhlbWUgOC1iaXQgdmVyc2lvbiwgZGUgVmljdG9yZXN0byA5OSBlbiBZb3VUdWJlXCIsIHtcclxuICAgICAgICBmb250U2l6ZTogXCI0MHB4XCIsXHJcbiAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuICAgICAgdGhpcy5hZGRcclxuICAgICAgLnRleHQoNjQwLCA2ODAsIFwiV2FsdWlnaSBQaW5iYWxsIDgtQklUIC0gTWFyaW8gS2FydCBEU1wiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiNDBweFwiLFxyXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIlxyXG4gICAgICB9KVxyXG4gICAgICAuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgIHRoaXMuYWRkXHJcbiAgICAgIC50ZXh0KDY0MCwgNzEwLCBcIihTbWFzaCBCcm9zLiBWZXJzaW9uKSBkZSBMb2VkZXIgZW4gWW91dHViZVwiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiNDBweFwiLFxyXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIlxyXG4gICAgICB9KVxyXG4gICAgICAuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgIFxyXG4gICAgY29uc3QgbWVudUJ0biA9IHRoaXMuYWRkXHJcbiAgICAgIC50ZXh0KDY0MCwgOTAwLCBcIlZvbHZlciBhbCBtZW7DuiBwcmluY2lwYWxcIiwge1xyXG4gICAgICAgIGZvbnRTaXplOiBcIjMycHhcIixcclxuICAgICAgICBjb2xvcjogXCIjMDBmZjAwXCJcclxuICAgICAgfSlcclxuICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSlcclxuICAgICAgLm9uKFwicG9pbnRlcm92ZXJcIiwgKCkgPT4gbWVudUJ0bi5zZXRDb2xvcihcIiNmZjg4ODhcIikpXHJcbiAgICAgIC5vbihcInBvaW50ZXJvdXRcIiwgKCkgPT4gbWVudUJ0bi5zZXRDb2xvcihcIiNmZmZmZmZcIikpXHJcbiAgICAgIC5vbihcInBvaW50ZXJkb3duXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KFwiTWVudVNjZW5lXCIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJlSGlzdG9yaWFTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZXtcclxuICAgIHByZWxvYWQoKXtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJib3RvblwiLCBcIi9hc3NldHMvaW1hZ2VzL2JvdG9uLnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oXCJ0aGVtZVwiLCBcIi9hc3NldHMvbXVzaWMvRjEubXAzXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZSgpe1xyXG4gICAgICAgIHRoaXMubXVzaWMgPSB0aGlzLnNvdW5kLmFkZChcInRoZW1lXCIsIHtsb29wOiB0cnVlfSk7XHJcbiAgICAgICAgdGhpcy5tdXNpYy5wbGF5KCk7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dCg2NTAsIDQwMCwgXCLCv1F1aWVyZXMgb21pdGlyIGxhIGhpc3RvcmlhP1wiLCB7XHJcbiAgICAgICAgZm9udFNpemU6IFwiNDVweFwiLFxyXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIlxyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIHRoaXMuYWRkLmltYWdlKDY1MCwgNTAwLCBcImJvdG9uXCIpLnNldEludGVyYWN0aXZlKHt1c2VIYW5kQ3Vyc29yOiB0cnVlfSkub24oXCJwb2ludGVyZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoXCJIaXN0b3JpYVNjZW5lXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5hZGQudGV4dCg2NTAsIDUwMCwgXCJWZXIgaGlzdG9yaWFcIix7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiBcIjMwcHhcIixcclxuICAgICAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgdGhpcy5hZGQuaW1hZ2UoNjUwLCA2MDAsIFwiYm90b25cIikuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6IHRydWV9KS5vbihcInBvaW50ZXJkb3duXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydChcIk1lbnVTY2VuZVwiKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoNjUwLCA2MDAsIFwiU2FsdGFyIGhpc3RvcmlhXCIse1xyXG4gICAgICAgICAgICBmb250U2l6ZTogXCIzMHB4XCIsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIlxyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIFxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlzdG9yaWFTY2VuZTIgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoXCJIaXN0b3JpYVNjZW5lMlwiKTtcclxuICB9XHJcbiAgcHJlbG9hZCgpe1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwiZm9uZG9faGlzdDJcIiwgXCIvYXNzZXRzL2ltYWdlcy9oaXN0Mi5qcGVnXCIpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKFwiYm90b25cIiwgXCIvYXNzZXRzL2ltYWdlcy9ib3Rvbi5wbmdcIik7XHJcbiAgICBcclxuICB9XHJcbiAgY3JlYXRlKCkge1xyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUJhY2tncm91bmQoKTtcclxuICAgIHRoaXMuYWRkLnJlY3RhbmdsZSg2NTAsIDEwNzUsIDEwMDAsIDYwMCwgXCIjMDAwMDAwXCIpLnNldE9yaWdpbigwLjUpO1xyXG4gICAgdGhpcy5hZGQudGV4dCg2NTAsIDgwMCwgXCJQZXJvIHN1IG1heW9yIHJpdmFsLCBDYXJsb3MgU2FudG9zLCBsZSBwaXNhIGxvcyB0YWxvbmVzXCIse1xyXG4gICAgICBmb250U2l6ZTogXCJib2xkIDI1cHhcIixcclxuICAgICAgY29sb3I6IFwiIzAwRkZGRlwiXHJcbiAgICB9KS5zZXRPcmlnaW4oMC41KVxyXG4gICAgdGhpcy5hZGQudGV4dCg2NTAsIDgzMCwgXCLCv1F1w6kgcGlsb3RvIHNlIGxhemFyw6EgY29uIGxhIHZpY3RvcmlhIGRlIGxhIGZpbmFsP1wiLHtcclxuICAgICAgZm9udFNpemU6IFwiYm9sZCAyNXB4XCIsXHJcbiAgICAgIGNvbG9yOiBcIiMwMEZGRkZcIlxyXG4gICAgfSkuc2V0T3JpZ2luKDAuNSlcclxuXHJcbiAgICB0aGlzLmFkZC50ZXh0KDY1MCwgOTAwLCBcIlB1bHNhIHBhcmEgY29udGludWFyXCIse1xyXG4gICAgICAgICAgICBmb250U2l6ZTogXCJib2xkIDc1cHhcIixcclxuICAgICAgICAgICAgY29sb3I6IFwiIzAwRkYwMFwiXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgICAuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6IHRydWV9KS5vbihcInBvaW50ZXJkb3duXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydChcIk1lbnVTY2VuZVwiKTtcclxuICAgICAgICB9KVxyXG4gIH1cclxuICBjcmVhdGVCYWNrZ3JvdW5kKCkge1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5hZGQuaW1hZ2UoNjQwLCA0ODAsIFwiZm9uZG9faGlzdDJcIik7XHJcbiAgICB0aGlzLmJhY2tncm91bmQuc2V0RGlzcGxheVNpemUoMTI4MCwgOTYwKTtcclxuICB9XHJcblxyXG59IiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcbmltcG9ydCB7IEhpc3RvcmlhU2NlbmUgfSBmcm9tIFwiLi9zY2VuZXMvSGlzdG9yaWFTY2VuZS5qc1wiO1xyXG5pbXBvcnQgeyBNZW51U2NlbmUgfSBmcm9tIFwiLi9zY2VuZXMvTWVudVNjZW5lLmpzXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuL3NjZW5lcy9HYW1lU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lT25saW5lIH0gZnJvbSBcIi4vc2NlbmVzL0dhbWVTY2VuZU9ubGluZS5qc1wiO1xyXG5pbXBvcnQgeyBQYXVzZVNjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL1BhdXNlU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgV2lubmluZ1NjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL1dpbm5pbmdTY2VuZS5qc1wiO1xyXG5pbXBvcnQgeyBDcmVkaXRvc1NjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL0NyZWRpdG9zU2NlbmUuanNcIjtcclxuaW1wb3J0IHtQcmVIaXN0b3JpYVNjZW5lfSBmcm9tIFwiLi9zY2VuZXMvUHJlSGlzdG9yaWFTY2VuZS5qc1wiO1xyXG5pbXBvcnQgeyBIaXN0b3JpYVNjZW5lMiB9IGZyb20gXCIuL3NjZW5lcy9IaXN0b3JpYVNjZW5lMi5qc1wiO1xyXG5cclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICB0eXBlOiBQaGFzZXIuQVVUTyxcclxuICB3aWR0aDogMTI4MCxcclxuICBoZWlnaHQ6IDk2MCxcclxuICBwYXJlbnQ6IFwiZ2FtZS1jb250YWluZXJcIixcclxuICBwaHlzaWNzOiB7XHJcbiAgICBkZWZhdWx0OiBcImFyY2FkZVwiLFxyXG4gICAgYXJjYWRlOiB7XHJcbiAgICAgIGdyYXZpdHk6IHsgeTogMCB9LFxyXG4gICAgICBkZWJ1ZzogZmFsc2VcclxuICAgIH1cclxuICB9LFxyXG4gIHNjZW5lOiBbUHJlSGlzdG9yaWFTY2VuZSwgTWVudVNjZW5lLCBIaXN0b3JpYVNjZW5lLCBHYW1lU2NlbmUsIFBhdXNlU2NlbmUsIFdpbm5pbmdTY2VuZSxHYW1lU2NlbmVPbmxpbmUsIENyZWRpdG9zU2NlbmUsIEhpc3RvcmlhU2NlbmUyXSxcclxuICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzFhMWEyZVwiXHJcbn07XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IFBoYXNlci5HYW1lKGNvbmZpZyk7XHJcbiIsImltcG9ydCBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi9HYW1lU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgQ2FyIH0gZnJvbSBcIi4uL2VudGl0aWVzL0Nhci5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVTY2VuZU9ubGluZSBleHRlbmRzIEdhbWVTY2VuZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIkdhbWVTY2VuZU9ubGluZVwiKTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICBzdXBlci5pbml0KCk7IC8vIEluaWNpYWxpemEgdmFyaWFibGVzIGRlIEdhbWVTY2VuZVxyXG4gICAgdGhpcy5teVJvbGUgPSBudWxsOyAvLyAncGxheWVyMScgbyAncGxheWVyMidcclxuICAgIHRoaXMub3Bwb25lbnRSb2xlID0gbnVsbDtcclxuICAgIHRoaXMud2FpdGluZ1RleHQgPSBudWxsO1xyXG4gICAgdGhpcy5nYW1lU3RhcnRlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiBjcmVhdGUoKSB7XHJcbiAgICAvLyAxLiBDYXJnYXIgZm9uZG8geSBtYXBhXHJcbiAgICB0aGlzLmNyZWF0ZUJhY2tncm91bmQoKTtcclxuICAgIHRoaXMuY3JlYXRlQ29sbGlzaW9uTWFwKCk7XHJcbiAgICB0aGlzLmNyZWF0ZUNoZWNrUG9pbnQoKTtcclxuICAgIHRoaXMuY3JlYXRlRmluaXNoTGluZSgpO1xyXG4gICAgXHJcbiAgICB0aGlzLnBvd2VyVXBzID0gdGhpcy5waHlzaWNzLmFkZC5ncm91cCgpOyBcclxuXHJcbiAgICAvLyAtLS0gQ09SUkVDQ0nDk046IERlZmluaXIgbGEgdGVjbGEgRVNDIHBhcmEgZXZpdGFyIGVsIGVycm9yIGVuIHN1cGVyLnVwZGF0ZSgpIC0tLVxyXG4gICAgdGhpcy5lc2NLZXkgPSB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRVNDKTtcclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuc291bmQuc3RvcEFsbCgpO1xyXG4gICAgdGhpcy5tdXNpYyA9IHRoaXMuc291bmQuYWRkKFwiYmdtXCIsIHtsb29wOiB0cnVlfSk7XHJcbiAgICB0aGlzLm11c2ljLnBsYXkoKTtcclxuXHJcbiAgICB0aGlzLndhaXRpbmdUZXh0ID0gdGhpcy5hZGQudGV4dCg2NDAsIDQ4MCwgXCJDb25lY3RhbmRvIGFsIHNlcnZpZG9yLi4uXCIsIHtcclxuICAgICAgZm9udFNpemU6IFwiNDBweFwiLCBcclxuICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiLFxyXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzAwMDAwMFwiXHJcbiAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgyMDAwKTtcclxuXHJcbiAgICAvLyAzLiBJbmljaWFyIGNvbmV4acOzbiBXZWJTb2NrZXRcclxuICAgIHRoaXMuc2V0dXBTb2NrZXQoKTtcclxuICB9XHJcblxyXG4gIHNldHVwU29ja2V0KCkge1xyXG4gICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KCd3czovL2xvY2FsaG9zdDozMDAwJyk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub25vcGVuID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLndhaXRpbmdUZXh0LnNldFRleHQoXCJCdXNjYW5kbyBvcG9uZW50ZS4uLlwiKTtcclxuICAgICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdqb2luUXVldWUnIH0pKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgIHRoaXMuaGFuZGxlU2VydmVyTWVzc2FnZShkYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgdGhpcy53YWl0aW5nVGV4dC5zZXRUZXh0KFwiRGVzY29uZWN0YWRvIGRlbCBzZXJ2aWRvclwiKS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNlcnZlck1lc3NhZ2UoZGF0YSkge1xyXG4gICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgY2FzZSAnZ2FtZVN0YXJ0JzpcclxuICAgICAgICB0aGlzLm15Um9sZSA9IGRhdGEucm9sZTtcclxuICAgICAgICB0aGlzLm9wcG9uZW50Um9sZSA9IHRoaXMubXlSb2xlID09PSAncGxheWVyMScgPyAncGxheWVyMicgOiAncGxheWVyMSc7XHJcbiAgICAgICAgdGhpcy5zdGFydEdhbWUoKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ3BsYXllclVwZGF0ZSc6XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZVN0YXJ0ZWQpIHtcclxuICAgICAgICAgIHRoaXMudXBkYXRlT3Bwb25lbnQoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnZ2FtZU92ZXInOlxyXG4gICAgICAgIC8vIERldGVybWluYXIgcXVpw6luIGVzIGVsIG9iamV0byBnYW5hZG9yXHJcbiAgICAgICAgY29uc3Qgd2lubmVyQ2FyID0gZGF0YS53aW5uZXIgPT09IHRoaXMubXlSb2xlIFxyXG4gICAgICAgICAgICA/IHRoaXMucGxheWVycy5nZXQodGhpcy5teVJvbGUpIFxyXG4gICAgICAgICAgICA6IHRoaXMucGxheWVycy5nZXQodGhpcy5vcHBvbmVudFJvbGUpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoXCJXaW5uaW5nU2NlbmVcIiwgeyB3aW5uZXI6IHdpbm5lckNhciB9KTtcclxuICAgICAgICB0aGlzLnNvY2tldC5jbG9zZSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgICBjYXNlICdvcHBvbmVudERpc2Nvbm5lY3RlZCc6XHJcbiAgICAgICAgdGhpcy53YWl0aW5nVGV4dC5zZXRUZXh0KFwiT3BvbmVudGUgZGVzY29uZWN0YWRvXCIpLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzLnBhdXNlKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGFydEdhbWUoKSB7XHJcbiAgICB0aGlzLndhaXRpbmdUZXh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgdGhpcy5nYW1lU3RhcnRlZCA9IHRydWU7XHJcblxyXG4gICAgLy8gQ3JlYXIgbG9zIGNvY2hlcyB1c2FuZG8gbGEgbMOzZ2ljYSBiYXNlXHJcbiAgICAvLyBOT1RBOiBDcmVhbW9zIGxvcyBjb2NoZXMgbWFudWFsbWVudGUgcGFyYSBjb250cm9sYXIgbG9zIGlucHV0c1xyXG4gICAgY29uc3QgY2FyMSA9IG5ldyBDYXIodGhpcywgXCJwbGF5ZXIxXCIsIDc0MCwgNzE1LCBcImNvY2hlXCIpO1xyXG4gICAgY29uc3QgY2FyMiA9IG5ldyBDYXIodGhpcywgXCJwbGF5ZXIyXCIsIDc1MCwgNzQ1LCBcImNhcl9yZWRcIik7XHJcbiAgICB0aGlzLnBsYXllcnMuc2V0KFwicGxheWVyMVwiLCBjYXIxKTtcclxuICAgIHRoaXMucGxheWVycy5zZXQoXCJwbGF5ZXIyXCIsIGNhcjIpO1xyXG5cclxuICAgIC8vIEhhYmlsaXRhciBjb2xpc2lvbmVzXHJcbiAgICB0aGlzLnNldHVwQ29sbGlzaW9ucygpO1xyXG5cclxuICAgIC8vIENPTkZJR1VSQVIgSU5QVVRTOiBTb2xvIGNvbnRyb2xvIE1JIGNvY2hlXHJcbiAgICB0aGlzLnNldHVwTXlJbnB1dCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBNeUlucHV0KCkge1xyXG4gICAgLy8gRGVmaW5pciB0ZWNsYXMgKFdBU0QgbyBGbGVjaGFzLCBkYSBpZ3VhbCwgdXNhcmVtb3MgdW5hcyBlc3TDoW5kYXIgcGFyYSBtw60pXHJcbiAgICB0aGlzLmN1cnNvcnMgPSB0aGlzLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKTtcclxuICAgIHRoaXMua2V5cyA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5cyh7XHJcbiAgICAgIHc6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5XLFxyXG4gICAgICBhOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuQSxcclxuICAgICAgczogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlMsXHJcbiAgICAgIGQ6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5EXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIGlmICghdGhpcy5nYW1lU3RhcnRlZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG15Q2FyID0gdGhpcy5wbGF5ZXJzLmdldCh0aGlzLm15Um9sZSk7XHJcbiAgICBpZiAoIW15Q2FyKSByZXR1cm47XHJcblxyXG4gICAgLy8gMS4gTW92ZXIgTUkgY29jaGUgbG9jYWxtZW50ZVxyXG4gICAgdGhpcy5oYW5kbGVMb2NhbE1vdmVtZW50KG15Q2FyKTtcclxuXHJcbiAgICAvLyAyLiBFbnZpYXIgTUkgcG9zaWNpw7NuIGFsIHNlcnZpZG9yXHJcbiAgICB0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgdHlwZTogJ3BsYXllck1vdmUnLFxyXG4gICAgICB4OiBteUNhci54LFxyXG4gICAgICB5OiBteUNhci55LFxyXG4gICAgICBhbmdsZTogbXlDYXIuYW5nbGUsXHJcbiAgICAgIHNwZWVkOiBteUNhci5jdXJyZW50U3BlZWRcclxuICAgIH0pKTtcclxuXHJcbiAgICAvLyAzLiBDb21wcm9iYXIgY29uZGljaW9uZXMgZGUgY2FycmVyYSAoQ2hlY2twb2ludHMvTWV0YSlcclxuICAgIC8vIEVzdG8gc2UgbWFuZWphIGVuIHNldHVwQ29sbGlzaW9ucyBoZXJlZGFkbywgXHJcbiAgICAvLyBQRVJPIGRlYmVtb3MgYXZpc2FyIGFsIHNlcnZlciBzaSBnYW5hbW9zLlxyXG4gICAgaWYgKG15Q2FyLmxhcHMgPj0gdGhpcy5NQVhfTEFQUykge1xyXG4gICAgICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAncmFjZUZpbmlzaCcgfSkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBY3R1YWxpemFyIGzDs2dpY2EgZGUgdGVycmVubyAoY8Opc3BlZC9waXN0YSlcclxuICAgIHN1cGVyLnVwZGF0ZSgpOyBcclxuICB9XHJcblxyXG4gIGhhbmRsZUxvY2FsTW92ZW1lbnQoY2FyKSB7XHJcbiAgICAvLyBMw7NnaWNhIHNpbXBsZSBkZSBtb3ZpbWllbnRvIHNpbiBDb21tYW5kUHJvY2Vzc29yIHBhcmEgZXZpdGFyIGzDrW9zIG9ubGluZSBwb3IgYWhvcmFcclxuICAgIGNvbnN0IHNwZWVkID0gY2FyLmN1cnJlbnRTcGVlZDtcclxuICAgIGxldCBkaXJZID0gMDtcclxuICAgIGxldCBkaXJYID0gMDtcclxuXHJcbiAgICAvLyBVc2Ftb3MgZmxlY2hhcyBPIHdhc2QgcGFyYSBjb250cm9sYXIgTUkgY29jaGVcclxuICAgIGlmICh0aGlzLmN1cnNvcnMudXAuaXNEb3duIHx8IHRoaXMua2V5cy53LmlzRG93bikgZGlyWSA9IDE7XHJcbiAgICBlbHNlIGlmICh0aGlzLmN1cnNvcnMuZG93bi5pc0Rvd24gfHwgdGhpcy5rZXlzLnMuaXNEb3duKSBkaXJZID0gLTE7XHJcblxyXG4gICAgaWYgKHRoaXMuY3Vyc29ycy5sZWZ0LmlzRG93biB8fCB0aGlzLmtleXMuYS5pc0Rvd24pIGRpclggPSAtMTtcclxuICAgIGVsc2UgaWYgKHRoaXMuY3Vyc29ycy5yaWdodC5pc0Rvd24gfHwgdGhpcy5rZXlzLmQuaXNEb3duKSBkaXJYID0gMTtcclxuXHJcbiAgICAvLyBBcGxpY2FyIGbDrXNpY2FcclxuICAgIGlmIChkaXJYICE9PSAwKSBjYXIuYW5nbGUgKz0gZGlyWCAqIDEuNTtcclxuICAgIFxyXG4gICAgaWYgKGRpclkgIT09IDApIHtcclxuICAgICAgdGhpcy5waHlzaWNzLnZlbG9jaXR5RnJvbVJvdGF0aW9uKFxyXG4gICAgICAgIFBoYXNlci5NYXRoLkRlZ1RvUmFkKGNhci5hbmdsZSksXHJcbiAgICAgICAgc3BlZWQgKiBkaXJZLFxyXG4gICAgICAgIGNhci5ib2R5LnZlbG9jaXR5XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVPcHBvbmVudChkYXRhKSB7XHJcbiAgICBjb25zdCBvcHBvbmVudCA9IHRoaXMucGxheWVycy5nZXQodGhpcy5vcHBvbmVudFJvbGUpO1xyXG4gICAgaWYgKG9wcG9uZW50KSB7XHJcbiAgICAgIC8vIEludGVycG9sYWNpw7NuIGLDoXNpY2E6IG1vdmVtb3MgZWwgc3ByaXRlIGEgZG9uZGUgZGljZSBlbCBzZXJ2ZXJcclxuICAgICAgb3Bwb25lbnQueCA9IGRhdGEueDtcclxuICAgICAgb3Bwb25lbnQueSA9IGRhdGEueTtcclxuICAgICAgb3Bwb25lbnQuc2V0Um90YXRpb24oUGhhc2VyLk1hdGguRGVnVG9SYWQoZGF0YS5hbmdsZSkpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlBoYXNlciIsIkhpc3RvcmlhU2NlbmUiLCJjb25zdHJ1Y3RvciIsInN1cGVyIiwicHJlbG9hZCIsInRoaXMiLCJsb2FkIiwiaW1hZ2UiLCJjcmVhdGUiLCJjcmVhdGVCYWNrZ3JvdW5kIiwiYWRkIiwicmVjdGFuZ2xlIiwic2V0T3JpZ2luIiwidGV4dCIsImZvbnRTaXplIiwiY29sb3IiLCJzZXRJbnRlcmFjdGl2ZSIsInVzZUhhbmRDdXJzb3IiLCJvbiIsInNjZW5lIiwic3RhcnQiLCJiYWNrZ3JvdW5kIiwic2V0RGlzcGxheVNpemUiLCJNZW51U2NlbmUiLCJjcmVhdGVCb3RvbiIsImxvZ28iLCJ3aWR0aCIsImhlaWdodCIsImJvdG9uZXMiLCJub21icmVzIiwiZXNjZW5hcyIsImZvckVhY2giLCJ5IiwiaSIsImJ0bkltZyIsImJ0blRleHQiLCJwdXNoIiwic2V0Q29sb3IiLCJDYXIiLCJBcmNhZGUiLCJTcHJpdGUiLCJpZCIsIngiLCJ0ZXh0dXJlIiwibGFwcyIsInBhc3NlZENoZWNrcG9pbnQiLCJqdXN0Q3Jvc3NlZEZpbmlzaCIsImV4aXN0aW5nIiwicGh5c2ljcyIsImJhc2VTcGVlZCIsIm9mZlJvYWRTcGVlZCIsImN1cnJlbnRTcGVlZCIsImlzT2ZmUm9hZCIsInNldENvbGxpZGVXb3JsZEJvdW5kcyIsImJvZHkiLCJhbGxvd0dyYXZpdHkiLCJzZXREcmFnIiwic2V0U2NhbGUiLCJzZXRTaXplIiwic2V0T2Zmc2V0Iiwic2V0T2ZmUm9hZCIsInZhbHVlIiwic2V0VGludCIsIkNvbW1hbmRQcm9jZXNzb3IiLCJwbGF5ZXJzIiwiTWFwIiwiZ2FtZVNjZW5lIiwic2V0UGxheWVycyIsInNldEdhbWVTY2VuZSIsInByb2Nlc3MiLCJjb21tYW5kIiwiZXhlY3V0ZSIsIkNvbW1hbmQiLCJzZXJpYWxpemUiLCJnZXRQbGF5ZXIiLCJNb3ZlQ2FyQ29tbWFuZCIsImNhciIsImRpclgiLCJkaXJZIiwic3BlZWQiLCJhbmdsZSIsInZlbG9jaXR5RnJvbVJvdGF0aW9uIiwiTWF0aCIsIkRlZ1RvUmFkIiwidmVsb2NpdHkiLCJQYXVzZUdhbWVDb21tYW5kIiwiaXNQYXVzZWQiLCJzZXRQYXVzZVN0YXRlIiwiR2FtZVNjZW5lIiwiY29uc29sZSIsImxvZyIsImF1ZGlvIiwiZmlsZSIsIndhcm4iLCJzcmMiLCJpbml0IiwiaW5wdXRNYXBwaW5ncyIsImVzY1dhc0Rvd24iLCJwcm9jZXNzb3IiLCJNQVhfTEFQUyIsInNvdW5kIiwic3RvcEFsbCIsIm11c2ljIiwibG9vcCIsInBsYXkiLCJ3b3JsZCIsInJlc3VtZSIsInBvd2VyVXBzIiwiZ3JvdXAiLCJjcmVhdGVDaGVja1BvaW50IiwiY3JlYXRlRmluaXNoTGluZSIsImNyZWF0ZUNvbGxpc2lvbk1hcCIsInNldFVwUGxheWVycyIsInNldHVwQ29sbGlzaW9ucyIsImNyZWF0ZVBvd2VyVXAiLCJlc2NLZXkiLCJpbnB1dCIsImtleWJvYXJkIiwiYWRkS2V5IiwiS2V5Ym9hcmQiLCJLZXlDb2RlcyIsIkVTQyIsImxhcFRleHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJzZXREZXB0aCIsInR5cGUiLCJzcHJpdGUiLCJjb2xsaXNpb25NYXAiLCJzZXRWaXNpYmxlIiwiZyIsImdyYXBoaWNzIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJmaW5pc2hMaW5lIiwic3RhdGljSW1hZ2UiLCJ1cGRhdGVGcm9tR2FtZU9iamVjdCIsIkNoZWNrUG9pbnRMaW5lIiwic3RhcnRYIiwic3RhcnRZIiwiY2FyMSIsImNhcjIiLCJzZXQiLCJwbGF5ZXJJZCIsInVwS2V5IiwiZG93bktleSIsImxlZnRLZXkiLCJyaWdodEtleSIsIm1hcCIsImNvbmZpZyIsInVwS2V5T2JqIiwiZG93bktleU9iaiIsImxlZnRLZXlPYmoiLCJyaWdodEtleU9iaiIsImxhdW5jaCIsIm9yaWdpbmFsU2NlbmUiLCJwYXVzZSIsInRvZ2dsZVBhdXNlIiwibmV3UGF1c2VTdGF0ZSIsInVwZGF0ZSIsImlzRG93biIsImZsb29yIiwidGV4dHVyZXMiLCJnZXRQaXhlbCIsInIiLCJiIiwibWFwcGluZyIsImFwcGx5UG93ZXJVcCIsInBvd2VyVXAiLCJ0aW1lIiwiZGVsYXllZENhbGwiLCJvdGhlckNhciIsImdldE90aGVyQ2FyIiwib3JpZ2luYWxTcGVlZCIsImNvbGxpZGVyIiwib3ZlcmxhcCIsImRlc3Ryb3kiLCJwbGF5ZXIiLCJ3aW5uZXIiLCJjdXJyZW50Q2FyIiwidmFsdWVzIiwiUGF1c2VTY2VuZSIsImRhdGEiLCJyZXN1bWVCdG4iLCJzdG9wIiwibWVudUJ0biIsIldpbm5pbmdTY2VuZSIsIkNyZWRpdG9zU2NlbmUiLCJQcmVIaXN0b3JpYVNjZW5lIiwiSGlzdG9yaWFTY2VuZTIiLCJwYXJlbnQiLCJkZWZhdWx0IiwiYXJjYWRlIiwiZ3Jhdml0eSIsImRlYnVnIiwibXlSb2xlIiwib3Bwb25lbnRSb2xlIiwid2FpdGluZ1RleHQiLCJnYW1lU3RhcnRlZCIsInNldHVwU29ja2V0Iiwic29ja2V0IiwiV2ViU29ja2V0Iiwib25vcGVuIiwic2V0VGV4dCIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5Iiwib25tZXNzYWdlIiwiZXZlbnQiLCJwYXJzZSIsImhhbmRsZVNlcnZlck1lc3NhZ2UiLCJvbmNsb3NlIiwicm9sZSIsInN0YXJ0R2FtZSIsInVwZGF0ZU9wcG9uZW50Iiwid2lubmVyQ2FyIiwiY2xvc2UiLCJzZXR1cE15SW5wdXQiLCJjdXJzb3JzIiwiY3JlYXRlQ3Vyc29yS2V5cyIsImtleXMiLCJhZGRLZXlzIiwidyIsIlciLCJBIiwicyIsIlMiLCJEIiwibXlDYXIiLCJoYW5kbGVMb2NhbE1vdmVtZW50IiwidXAiLCJkb3duIiwibGVmdCIsInJpZ2h0Iiwib3Bwb25lbnQiLCJzZXRSb3RhdGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9